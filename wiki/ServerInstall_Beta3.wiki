#labels Phase-Implementation
this page describes the Beta3 Server Installation

= THIS PAGE UNDER CONSTRUCTION =

= Preamble =
These scripts do a lot of dns queries. You're gonna wanna install bind and configure it to use forwarders. Maybe something like google public dns to help mask your queries. Then point your resolv.conf to localhost

Once installed, monitor your dns traffic a bit, your server will be looking up some interesting information. Get a good handle on this and work with your security teams to whitelist this server.

= Before you begin =
 # PostgresInstall
 # BindSetup

= System Deps =
 # ServerInstall_Beta3_Generic
 # ServerInstall_Beta3_Lenny
 # ServerInstall_Beta3_Ubuntu10

= Details =
 # install the CIF::Client (we use some functions in it for the server)
{{{
$> sudo perl -MCPAN -e 'install REST::Client, Text::Table, JSON, Module::Pluggable, Config::Simple, Snort::Rule, Class::Accessor, Digest::MD5, Digest::SHA1, Regexp::Common::net'
$> wget http://cpan.develooper.com/authors/id/S/SA/SAXJAZMAN/cif/CIF-Client-0.01_03.tar.gz
$> tar -zxvf CIF-Client-0.01_03.tar.gz
$> cd CIF-Client-0.01_03
$> perl Makefile.PL && make && sudo make install
}}}
 # create your "cif" user/group
{{{
$ sudo useradd -U -m cif
}}}
 # install the core server interface
{{{
$ wget http://collective-intelligence-framework.googlecode.com/files/cif-0.01_03.tar.gz
$ tar -zxvf cif-0.01_3.tar.gz
$ cd cif-0.01_03
$ ./configure --with-user=cif --prefix=/opt/cif-0.01_03
$ make testdeps
$ make fixdeps
$ make initdb
$ make tables
$ sudo make install
$ sudo ln -sf /opt/cif-0.01_03 /opt/cif
}}}
 # modify your local path, vi ~/.profile
{{{
if [ -d "/opt/cif/bin" ]; then
    PATH="/opt/cif/bin:$PATH"
fi
}}}
 # perform the "first run" to prime the database with it's initial intel (should take about 30min).
{{{
$ time /opt/cif/bin/cif_crontool -f -d
}}}
 # after this starts, run your first batch of analytics (should take about 3 hours)
{{{
$ time /opt/cif/bin/cif_analytics -d
}}}
 # when that's finished, run your first batch of feeds
{{{
$ time /opt/cif/bin/cif_feeds -D
}}}
 # log into the cif user (sudo su - cif) and modify it's cron tab (crontab -e)
{{{
# run analytics
*/5 * * * * /opt/cif/bin/cif_analytics &> /dev/null

# pull feed data
05     *       * * * /opt/cif/bin/cif_crontool -p hourly -T medium &> /dev/null
45     00      * * * /opt/cif/bin/cif_crontool -p daily -T low &> /dev/null

# update the feeds
00,15,30,45     *       * * * /opt/cif/bin/cif_feeds &> /dev/null
}}}