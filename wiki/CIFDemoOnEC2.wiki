#summary Trying out CIF on Amazon's EC2

= Introduction =

These instructions are for launching a demo EC2 instance of CIF. The image in its default configuration is not meant for production because it has limited disk space. 

= Details =

Currently, the only public AMI is available in the East(Virginia) availability zone. 
The AMI ID is *ami-eede7e87*. 

For instructions on launching an EC2 instance, follow the instructions from Amazon's site [http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/GetStartedLinux.html]. Once at the *Launch an Instance* step, use the *Classic Wizard* and search for the AMI ID (*ami-eede7e87*) in the *Community AMIs* tab. 

The only inbound ports that need to be permitted in the security group are TCP 443 for access to the CIF API and TCP 22 for SSH access.

A micro instance is good enough for a demo, but performance will be poor if you enable analytics as well. If you want to try analytics, use a larger instance size.


= Configure CIF =

Once the instance starts up, a few changes need to be made to get it to 
work. 

# Switch to the cif user.
{{{
$ sudo su - cif
}}}

# Add a role key that will be used to generate feeds.
{{{
$ cif_apikeys -u role_everyone_feed -a -g everyone -G everyone
}}}

# Add a CIF user to get an API key that will be used to access CIF with the client. Copy the API key that's generated from this command.
{{{
$ cif_apikeys -u myuser@mydomain.com -a -g everyone -G everyone
}}}


# Edit *~/.cif* and paste the following configuration in to generate feeds and setup the client.
{{{
[cif_feeds]
maxrecords = 10000
severity_feeds = high,medium
confidence_feeds = 95,85
apikeys = role_everyone_feed
max_days = 2
disabled_feeds = hash,rir,asn,countrycode,malware

[client]
host = https://127.0.0.1:443/api
apikey = xx-xx-xx-xx-xx #<<<< Paste in the API key from the last step here
timeout = 60
verify_tls = 0
}}} 

# Perform the steps from the *Load Data* section in the server guide. [http://code.google.com/p/collective-intelligence-framework/wiki/ServerInstall#Load_Data]

= Enable Analytics and Logging (Optional)= 
Logging has not been setup and analytics has been disabled. To enable analytics, uncomment the following line in the crontab for the cif user:
{{{
#*/5 * * * * /opt/cif/bin/cif_analytic -t 4 -m 4000 &> /dev/null
}}}
To enable logging, follow the 2nd step of *Finishing up* in the server install guide [http://code.google.com/p/collective-intelligence-framework/wiki/ServerInstall#Finishing_up].